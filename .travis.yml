language: node_js
sudo: false
node_js:
- '8'
- '10'
- '11'
- '12'
script:
- yarn test
before_install: yarn global add greenkeeper-lockfile@1
before_script: greenkeeper-lockfile-update
after_script: greenkeeper-lockfile-upload
deploy:
  - provider: npm
    email: mick@heise.de
    api_key:
      secure: "yTEQf+mgG0tb+Zc9YORndSQzI09WBMvCRpAKDbNrAr4UMbBNQ819tG9t75dGJclEbS3dRy6bP3VDk/NqPtermPmEhBjn38lvDX7JJxzA3BdCxTVrL0+lqdn+regZQlLLS3QpE/syZDCPHplMj+ibrzdHJlQVHXfsHj9vaWuR5A/SCIVzDTg2F09BVSUtUj7xJenwNq1R8Fex2F5KwTIABR7xumI8a29VqPQy2eUnGxZ2crjN+txs+0+Pil+KCe+Rg/hHoxrofzoBPm3VVV5Puo92UZaJYQbU4+RbdMYrhafKV373Ino4GGV1zU5tAmvSW5ViFvegbE0A2BfK6SGGec+tfYoB6GZgOPKIg/PbcfCtgCHRswojeFa4CbTIoGv48D1FxNRXM8EqG38w2SaHxp9+wpOo11TguzWwx+aYreN9ITq0eWflq8Cq+zWSCscNwydmxcUEqRgAg7TujFYknHVsscSKBjpjBmLx5fLJWtgBImMUhWVLP0BAUOrpppglCJl8h4AtCTRAV5KhrxD3ijb/WIflCFoQtqh9C4l6E0knkJLpdcDCny0uIjKMNHhiu/86sRJFUjMaI7lNx9re98M83bUo2Dl9dmHMg93d4c7sBpB7Fx9W0aqr5bxna+xZNSGFcNjNKSQXdUV7dIOY3LMQNDOYYTZyVm8ZHx2PVfc="
    on:
      tags: true
      repo: heiseonline/embetty-base
      node_js: '8'
  - provider: releases
    api_key:
      secure: "ZJ2A+YqqLfcRmOYG6+36ZapATBi2sVRjvHr+o6rVHfFIz6ltQCam2HvPmaHjIEu5A/ha1kktMtFFzWXiz2MjaGGe2754Xcv91832Uq9F5bxnHimDM6EeCS6EMvWyqwuaRKTSFoSJA4S8QvCWkTEVr/LkUTdxwDAKa/VXtxi4/E2D9cz28tKMEUFh4EVRewB8XOmg38VjGuoy9QtuHF/iXAif4TsPu9wXCRvLtdW00dyRAsKj2myHPbuvZTW1w5hBi4u7B3TcwxmORxBrDHmppU8IioVpIHhHnR81RdSJkqjq6ehch3B4HpMeFt0XyJTedHjtFMN7Kn+n1y8tLcscbdazsS8GgzFpq6tWWfkGhI9hJ0hucwaXXm8HZudlaBIQaizEMScwYiq8kHq7P1dyKl24WFpTf9kJivU+j110s+oxpiRXRVaDcbyJ51c+RnqSzc3KMDtJX8zk/bN+J83wXdkOIBsHgehKQgb7PhMGAiiVtaxZt/h9bp0iMScXwd/MUlGA5XUizU46EE3BkU9meD110RJFUAHfCc64YIfTJmCoa6wpOIRQ0ZoTsWlWAMayHL/k0ZFQXDRY/rGuwk8NNFndniq+J0fsVhGVQhOYk4UXxwskutSJf2LUYa3lOVF/NHni7msYbuQFFYV06pB2NekrZu3Xj2Zsjc6JEX+bLec="
    file:
    - "$BASE_NAME.zip"
    - "$BASE_NAME.tar.gz"
    skip_cleanup: true
    on:
      tags: true
      repo: heiseonline/embetty-base
      node_js: '8'
env:
  global:
  - BASE_NAME=embetty-base-$TRAVIS_TAG
